{
  "id": "org.freedesktop.Sdk.Extension.swift",
  "branch": "20.08",
  "runtime": "org.freedesktop.Sdk",
  "sdk": "org.freedesktop.Sdk",
  "runtime-version": "20.08",
  "build-extension": true,
  "separate-locales": false,
  "appstream-compose": false,
  "build-options": {
    "prepend-path": "/usr/lib/sdk/swift"
  },
  "modules": [
    {
      "name": "libbsd",
      "config-opts": [
        "--disable-static"
      ],
      "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/share/man"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://libbsd.freedesktop.org/releases/libbsd-0.8.6.tar.xz",
          "sha256": "467fbf9df1f49af11f7f686691057c8c0a7613ae5a870577bef9155de39f9687"
        }
      ]
    },
    {
      "name": "swift",
      "buildsystem": "simple",
      "subdir": "swift",
      "build-commands": [
        "./utils/build-script --install-prefix=/usr/lib/sdk/swift --release --lldb --llbuild --swiftpm --xctest --foundation --libdispatch",
        "./utils/build-script --install-prefix=/usr/lib/sdk/swift --install-lldb --install-llbuild --install-swiftpm --install-xctest --install-foundation --install-libdispatch"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/apple/swift/archive/refs/tags/swift-5.4-RELEASE.tar.gz",
          "sha256": "421dafdb0dd4c55cdfed4d8736e965b42a0d97f690bb13528947f9cc3f7ddca9",
          "dest": "swift"
        },
        {
          "type": "archive",
          "url": "https://github.com/apple/llvm-project/archive/refs/tags/swift-5.4-DEVELOPMENT-SNAPSHOT-2021-04-23-a.tar.gz",
          "sha256": "36b184a701a666989cf205d72e50a438a574ae365bebb46bf379e9bd06c6a359",
          "dest": "llvm-project"
        },
        {
          "type": "archive",
          "url": "https://github.com/apple/swift-llbuild/archive/refs/tags/swift-5.4-RELEASE.tar.gz",
          "sha256": "91d3e454fff11b14bf89e6ab2b61bacb39395f92d5aab336923670aaa0a7e2fc",
          "dest": "llbuild"
        },
        {
          "type": "archive",
          "url": "https://github.com/apple/swift-package-manager/archive/refs/tags/swift-5.4-RELEASE.tar.gz",
          "sha256": "53a9afee939ccc36bfcd019a57e3d5ffe36ffa027645f99fd3fae893d4bc69a7",
          "dest": "swiftpm"
        },
        {
          "type": "archive",
          "url": "https://github.com/apple/swift-cmark/archive/refs/tags/swift-5.4-RELEASE.tar.gz",
          "sha256": "ca30ea99bdad03b80939c74899ddcd7cc7e2a55d36fe357f98ff7f620442142e",
          "dest": "cmark"
        },
        {
          "type": "archive",
          "url": "https://github.com/apple/swift-corelibs-foundation/archive/refs/tags/swift-5.4-RELEASE.tar.gz",
          "sha256": "28f2033b6bdaf0d6d0984fb3f85fafad351b0511a5b99293b2b3ba561cb27f05",
          "dest": "swift-corelibs-foundation"
        },
        {
          "type": "archive",
          "url": "https://github.com/apple/swift-corelibs-xctest/archive/refs/tags/swift-5.4-RELEASE.tar.gz",
          "sha256": "aaf8a15b9ff5fde88ba594364a39534f2302ed9c6c5c251c54c93f71f0860c26",
          "dest": "swift-corelibs-xctest"
        },
        {
          "type": "archive",
          "url": "https://github.com/apple/swift-corelibs-libdispatch/archive/refs/tags/swift-5.4-RELEASE.tar.gz",
          "sha256": "bafbcc1feaf8ac3a82edffde27b85820936cbfd0d194c9c1a320a13c356083c0",
          "dest": "swift-corelibs-libdispatch"
        }
      ]
    },
    {
      "name": "sourcekit-lsp",
      "buildsystem": "simple",
      "build-commands": [
        "swift build",
        "install -Dm755 .build/debug/sourcekit-lsp $FLATPAK_DEST/sourcekit-lsp"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/apple/sourcekit-lsp/archive/refs/tags/swift-5.4-RELEASE.tar.gz",
          "sha256": "c3f80427f087e7422bfe0359bda81d1c1a6e2e7295eebdaa559e2323670460e9"
        }
      ]
    },
    {
      "name": "appdata",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p ${FLATPAK_DEST}/share/appdata",
        "cp org.freedesktop.Sdk.Extension.swift.appdata.xml ${FLATPAK_DEST}/share/appdata",
        "appstream-compose --basename=org.freedesktop.Sdk.Extension.swift --prefix=${FLATPAK_DEST} --origin=flatpak org.freedesktop.Sdk.Extension.swift"
      ],
      "sources": [
        {
            "type": "file",
            "path": "org.freedesktop.Sdk.Extension.swift.appdata.xml"
        }
      ]
    }
  ]
}
